<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>消防APP模板使用说明 | Fed-docs</title>
    <meta name="description" content="Hekr前端文档">
    
    
    <link rel="preload" href="/assets/css/0.styles.16e2754c.css" as="style"><link rel="preload" href="/assets/js/app.a4943324.js" as="script"><link rel="preload" href="/assets/js/2.03965f8c.js" as="script"><link rel="preload" href="/assets/js/5.80de3d18.js" as="script"><link rel="prefetch" href="/assets/js/10.b8994720.js"><link rel="prefetch" href="/assets/js/11.0ec545d6.js"><link rel="prefetch" href="/assets/js/12.02c16ef5.js"><link rel="prefetch" href="/assets/js/13.6ac43ad1.js"><link rel="prefetch" href="/assets/js/14.d408c93e.js"><link rel="prefetch" href="/assets/js/15.4f0d59db.js"><link rel="prefetch" href="/assets/js/16.82f80a83.js"><link rel="prefetch" href="/assets/js/17.f507f9c3.js"><link rel="prefetch" href="/assets/js/18.22dfb34c.js"><link rel="prefetch" href="/assets/js/19.2a3a415d.js"><link rel="prefetch" href="/assets/js/20.aa1492a8.js"><link rel="prefetch" href="/assets/js/21.c70552a9.js"><link rel="prefetch" href="/assets/js/22.f6b81080.js"><link rel="prefetch" href="/assets/js/23.a75caa1c.js"><link rel="prefetch" href="/assets/js/24.43c1f6cd.js"><link rel="prefetch" href="/assets/js/25.9b841371.js"><link rel="prefetch" href="/assets/js/26.468e842a.js"><link rel="prefetch" href="/assets/js/27.6c7a709f.js"><link rel="prefetch" href="/assets/js/28.a52990ba.js"><link rel="prefetch" href="/assets/js/29.f54cd8f7.js"><link rel="prefetch" href="/assets/js/3.253f865d.js"><link rel="prefetch" href="/assets/js/4.4e7ec42f.js"><link rel="prefetch" href="/assets/js/6.e4efd90d.js"><link rel="prefetch" href="/assets/js/7.a425c80c.js"><link rel="prefetch" href="/assets/js/8.70b491c7.js"><link rel="prefetch" href="/assets/js/9.70ba6f78.js">
    <link rel="stylesheet" href="/assets/css/0.styles.16e2754c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Fed-docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://10.10.1.2:7777/hekr-components/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hekr-components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://10.10.1.2:7777/auto/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auto
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/sdk/" class="nav-link">SDK</a></div><div class="nav-item"><a href="http://10.10.1.2:7777/layer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="http://gitlab.hekr.me/front-end/fed-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitLab
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://10.10.1.2:7777/hekr-components/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hekr-components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://10.10.1.2:7777/auto/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auto
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/sdk/" class="nav-link">SDK</a></div><div class="nav-item"><a href="http://10.10.1.2:7777/layer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="http://gitlab.hekr.me/front-end/fed-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitLab
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>消防APP模板使用说明</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_1-环境搭建" class="sidebar-link">1 环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_1-1-构建命令" class="sidebar-link">1.1 构建命令</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_1-2-开发目录" class="sidebar-link">1.2 开发目录</a></li></ul></li><li><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_2-基本信息配置" class="sidebar-link">2 基本信息配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_2-1-app基本信息配置" class="sidebar-link">2.1 app基本信息配置</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_2-2-本地存储key值配置" class="sidebar-link">2.2 本地存储key值配置</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_2-3-css变量配置" class="sidebar-link">2.3 css变量配置</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_2-4-字体图标设置" class="sidebar-link">2.4 字体图标设置</a></li></ul></li><li><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-集成模块说明" class="sidebar-link">3. 集成模块说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-1-zip更新" class="sidebar-link">3.1 Zip更新</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-2-接口拦截" class="sidebar-link">3.2 接口拦截</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-3-开发环境matrix" class="sidebar-link">3.3 开发环境Matrix</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-4-安卓返回键" class="sidebar-link">3.4 安卓返回键</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-5-移动端适配使用rem" class="sidebar-link">3.5 移动端适配使用Rem</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-6-定位天气" class="sidebar-link">3.6 定位天气</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-7-消息推送" class="sidebar-link">3.7 消息推送</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-8-左右切换动画" class="sidebar-link">3.8 左右切换动画</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-9-安卓返回取消弹层" class="sidebar-link">3.9 安卓返回取消弹层</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_3-10-头像裁剪上传" class="sidebar-link">3.10 头像裁剪上传</a></li></ul></li><li><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_4-标准规范" class="sidebar-link">4 标准规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_4-1-组件文件位置" class="sidebar-link">4.1 组件文件位置</a></li><li class="sidebar-sub-header"><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_4-2-router规范" class="sidebar-link">4.2 Router规范</a></li></ul></li><li><a href="/%E6%B6%88%E9%98%B2APP%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/#_5-todolist" class="sidebar-link">5 TodoList</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="消防app模板使用说明"><a href="#消防app模板使用说明" aria-hidden="true" class="header-anchor">#</a> 消防APP模板使用说明</h1> <blockquote><p><a href="http://gitlab.hekr.me/front-end/fire-app-template" target="_blank" rel="noopener noreferrer">消防APP模板地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="_1-环境搭建"><a href="#_1-环境搭建" aria-hidden="true" class="header-anchor">#</a> 1 环境搭建</h2> <h3 id="_1-1-构建命令"><a href="#_1-1-构建命令" aria-hidden="true" class="header-anchor">#</a> 1.1 构建命令</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 安装依赖</span>
<span class="token function">npm</span> <span class="token function">install</span>

<span class="token comment"># 启动本地服务（默认test环境接口） localhost:8080</span>
<span class="token function">npm</span> run dev

<span class="token comment"># 打包测试版本</span>
<span class="token function">npm</span> run build:test

<span class="token comment"># 打包灰度版本</span>
<span class="token function">npm</span> run build:gray

<span class="token comment"># 打包正式版本</span>
<span class="token function">npm</span> run build:prod
</code></pre></div><h3 id="_1-2-开发目录"><a href="#_1-2-开发目录" aria-hidden="true" class="header-anchor">#</a> 1.2 开发目录</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>template
├─ build
│    └─ build-version.js     <span class="token comment"># 打包后生成版本信息json</span>
├─ config
│    ├─ index.js
│    └─ prod.env.js          <span class="token comment"># 配置版本信息和pid信息</span>
├─ src
│    ├─ App.vue              <span class="token comment"># 入口文件</span>
│    ├─ main.js              <span class="token comment"># 主文件</span>
│    ├─ assets
│    │    ├─ iconfont        <span class="token comment"># 字体图标</span>
│    │    ├─ images          <span class="token comment"># 静态图片</span>
│    │    ├─ stylus          <span class="token comment"># 样式文件</span>
│    │    └─ utils           <span class="token comment"># js脚本</span>
│    ├─ components           <span class="token comment"># 组件文件</span>
│    │    ├─ hk-ui             <span class="token comment"># hekr公用组件</span>
│    │    ├─ page              <span class="token comment"># 业务组件</span>
│    │    └─ vant-ui
│    ├─ directive            <span class="token comment"># 指令文件夹</span>
│    │    └─ index.js
│    ├─ mixins               <span class="token comment"># mixins文件</span>
│    │    └─ scan.vue
│    ├─ prototype            <span class="token comment"># 挂载vue原型上的对象集合</span>
│    │    ├─ hekr.js
│    │    └─ index.js
│    ├─ router               <span class="token comment"># 路由</span>
│    │    └─ index.js
│    ├─ <span class="token function">service</span>              <span class="token comment"># api接口文件</span>
│    │    ├─ api
│    │    ├─ request
│    │    └─ server
│    ├─ store                <span class="token comment"># vue store</span>
│    │    ├─ actions.js
│    │    ├─ getters.js
│    │    ├─ index.js
│    │    ├─ mutations.js
│    │    └─ state.js
│    └─ views                <span class="token comment"># 页面</span>
│           ├─ <span class="token number">404</span>             <span class="token comment"># 404页面</span>
│           ├─ <span class="token builtin class-name">bind</span>            <span class="token comment"># 绑定设备相关页面</span>
│           ├─ ctrl            <span class="token comment"># 设备控制页面</span>
│           ├─ device          <span class="token comment"># 设备页面</span>
│           ├─ home            <span class="token comment"># 主页</span>
│           ├─ login           <span class="token comment"># 登录相关页面</span>
│           ├─ message         <span class="token comment"># 消息页面</span>
│           ├─ project         <span class="token comment"># 项目页面</span>
│           └─ user            <span class="token comment"># 个人中心页面</span>
├─ index.html
└─ package.json
</code></pre></div><h2 id="_2-基本信息配置"><a href="#_2-基本信息配置" aria-hidden="true" class="header-anchor">#</a> 2 基本信息配置</h2> <h3 id="_2-1-app基本信息配置"><a href="#_2-1-app基本信息配置" aria-hidden="true" class="header-anchor">#</a> 2.1 app基本信息配置</h3> <p>配置文件<code>config/prod.env.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">NODE_ENV</span><span class="token punctuation">:</span> <span class="token string">'&quot;production&quot;'</span><span class="token punctuation">,</span>
  <span class="token constant">API_ENV</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">API_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// 接口环境 test, gray, prod</span>
  <span class="token constant">BUILDTIME_ENV</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">parseInt</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token comment">// zip小版本，不用卸载app，热更新，时间戳间隔为10分钟</span>
  <span class="token constant">VERSION_ENV</span><span class="token punctuation">:</span> <span class="token string">'&quot;1.0.0&quot;'</span><span class="token punctuation">,</span> <span class="token comment">// app大版本，需要app重新安装时该版本才会变动</span>
  <span class="token constant">PID_ENV</span><span class="token punctuation">:</span> <span class="token string">'&quot;00000000000&quot;'</span> <span class="token comment">// 当前app的厂家pid, 区分app的标识</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-2-本地存储key值配置"><a href="#_2-2-本地存储key值配置" aria-hidden="true" class="header-anchor">#</a> 2.2 本地存储key值配置</h3> <p>文件<code>src/store/state.js</code></p> <h3 id="_2-3-css变量配置"><a href="#_2-3-css变量配置" aria-hidden="true" class="header-anchor">#</a> 2.3 css变量配置</h3> <p>文件<code>src/assets/stylus/var.styl</code>，包括颜色配置和间距配置</p> <h3 id="_2-4-字体图标设置"><a href="#_2-4-字体图标设置" aria-hidden="true" class="header-anchor">#</a> 2.4 字体图标设置</h3> <p>文件<code>src/assets/stylus/icon.styl</code></p> <p>操作流程：</p> <ol><li><p>登录iconfont网站，链接：<a href="http://www.iconfont.cn" target="_blank" rel="noopener noreferrer">http://www.iconfont.cn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>把需要的图标导入到项目里，设置项目的字体为<code>iconfont</code>, 前缀为<code>van-icon</code></p></li></ol> <p><img src="/assets/img/iconfont.64cb3bfa.png" alt=""></p> <ol start="3"><li><p>复制生成的Font class链接，引入到<code>icon.styl</code>里</p></li> <li><p>使用时可以直接用name：<code>van-icon(name=&quot;XXX&quot;)</code></p></li></ol> <h2 id="_3-集成模块说明"><a href="#_3-集成模块说明" aria-hidden="true" class="header-anchor">#</a> 3. 集成模块说明</h2> <h3 id="_3-1-zip更新"><a href="#_3-1-zip更新" aria-hidden="true" class="header-anchor">#</a> 3.1 Zip更新</h3> <ol><li>构建打包的时候执行<code>build/build-version.js</code>文件，生成带有版本信息的json文件</li> <li>进入app执行<code>src/assets/utils/zipUpdate.js</code>中的方法</li> <li>判断大版本（VERSION_ENV）和小版本（BUILDTIME_ENV），大版本更新提示卸载重装APP，小版本更新提示后执行<code>Matrix.upgradeH5</code>方法更新</li></ol> <h3 id="_3-2-接口拦截"><a href="#_3-2-接口拦截" aria-hidden="true" class="header-anchor">#</a> 3.2 接口拦截</h3> <ul><li>相关文件为<code>src/service/request.index.js</code></li> <li>设置请求超时时间和部分错误提示语</li> <li>如果是get请求，添加时间戳，解决缓存问题</li></ul> <h3 id="_3-3-开发环境matrix"><a href="#_3-3-开发环境matrix" aria-hidden="true" class="header-anchor">#</a> 3.3 开发环境Matrix</h3> <ul><li>正式打包后Matrix对象为app外壳提供，开发过程中可以模拟Matrix对象返回</li> <li>相关文件：<code>src/assets/utils/matrix.js</code></li> <li>文件可以设置默认返回结果，比如扫码和获取clientId</li></ul> <h3 id="_3-4-安卓返回键"><a href="#_3-4-安卓返回键" aria-hidden="true" class="header-anchor">#</a> 3.4 安卓返回键</h3> <ul><li>安卓返回时会执行<code>Matrix.back</code>方法，所以可以通过重置方法来实现某些效果</li> <li>集成的有在首页和登录页需要按两次返回退出APP</li></ul> <h3 id="_3-5-移动端适配使用rem"><a href="#_3-5-移动端适配使用rem" aria-hidden="true" class="header-anchor">#</a> 3.5 移动端适配使用Rem</h3> <ul><li>基数是20px, 使用postcss，开发中使用px或rem都可以，打包时会转成对应rem</li> <li>相关文件有：<code>src/assets/utils/rem.js</code>, <code>.postcssrc.js</code></li></ul> <h3 id="_3-6-定位天气"><a href="#_3-6-定位天气" aria-hidden="true" class="header-anchor">#</a> 3.6 定位天气</h3> <ul><li>使用高德地图进行定位（AMap.Geolocation）和天气查询（AMap.Weather）</li></ul> <h3 id="_3-7-消息推送"><a href="#_3-7-消息推送" aria-hidden="true" class="header-anchor">#</a> 3.7 消息推送</h3> <ul><li>登录时或自动登录状态下进入APP时，获取并绑定clientId</li> <li>手动退出时解绑clientId</li></ul> <h3 id="_3-8-左右切换动画"><a href="#_3-8-左右切换动画" aria-hidden="true" class="header-anchor">#</a> 3.8 左右切换动画</h3> <ul><li>Tab式切换，平滑左右切换</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 核心代码，举例设备控制页面左右切换</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      transitionName<span class="token punctuation">:</span> <span class="token string">'slide-right'</span><span class="token punctuation">,</span>
      items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'CtrlInfo'</span><span class="token punctuation">,</span> <span class="token string">'CtrlStatus'</span><span class="token punctuation">,</span> <span class="token string">'CtrlThreshold'</span><span class="token punctuation">,</span> <span class="token string">'CtrlAlarm'</span><span class="token punctuation">,</span> <span class="token string">'CtrlFault'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> toDepth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      <span class="token keyword">let</span> fromDepth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>transitionName <span class="token operator">=</span> toDepth <span class="token operator">&lt;</span> fromDepth <span class="token operator">?</span> <span class="token string">'slide-right'</span> <span class="token punctuation">:</span> <span class="token string">'slide-left'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>列表式切换，层级左右切换</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 核心代码，举例我的页面从列表切换到页面，进入和返回效果</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      transitionName<span class="token punctuation">:</span> <span class="token string">'slide-right'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> toDepth <span class="token operator">=</span> to<span class="token punctuation">.</span>name
      <span class="token keyword">this</span><span class="token punctuation">.</span>transitionName <span class="token operator">=</span> toDepth <span class="token operator">===</span> <span class="token string">'UserList'</span> <span class="token operator">?</span> <span class="token string">'slide-right'</span> <span class="token punctuation">:</span> <span class="token string">'slide-left'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-9-安卓返回取消弹层"><a href="#_3-9-安卓返回取消弹层" aria-hidden="true" class="header-anchor">#</a> 3.9 安卓返回取消弹层</h3> <h3 id="_3-10-头像裁剪上传"><a href="#_3-10-头像裁剪上传" aria-hidden="true" class="header-anchor">#</a> 3.10 头像裁剪上传</h3> <h2 id="_4-标准规范"><a href="#_4-标准规范" aria-hidden="true" class="header-anchor">#</a> 4 标准规范</h2> <h3 id="_4-1-组件文件位置"><a href="#_4-1-组件文件位置" aria-hidden="true" class="header-anchor">#</a> 4.1 组件文件位置</h3> <ul><li>公共组件，扩展性强，适用于其他项目，放在<code>src/components/hk-ui/</code>中，以<code>hk-</code>命名</li> <li>公共业务组件，偏向于业务型公用组件，放在<code>src/components/pages/</code>中</li> <li>某个页面使用的小组件，直接放在页面路径里</li></ul> <h3 id="_4-2-router规范"><a href="#_4-2-router规范" aria-hidden="true" class="header-anchor">#</a> 4.2 Router规范</h3> <ul><li>router的name首字母大写驼峰命名</li> <li>合理使用push和replace</li> <li>push和replace一律使用name跳转</li></ul> <h2 id="_5-todolist"><a href="#_5-todolist" aria-hidden="true" class="header-anchor">#</a> 5 TodoList</h2> <ul><li><input type="checkbox" id="checkbox40" checked="checked"><label for="checkbox40">登陆、注册、忘记密码、找回密码功能</label></li> <li><input type="checkbox" id="checkbox41" checked="checked"><label for="checkbox41">绑定clientId，退出解绑</label></li> <li><input type="checkbox" id="checkbox42" checked="checked"><label for="checkbox42">接口拦截  统一处理错误消息、get请求统一加入随机数</label></li> <li><input type="checkbox" id="checkbox43" checked="checked"><label for="checkbox43">matrix方法测试环境集成</label></li> <li><input type="checkbox" id="checkbox44" checked="checked"><label for="checkbox44">zip自动更新</label></li> <li><input type="checkbox" id="checkbox45" checked="checked"><label for="checkbox45">安卓返回键集成</label></li> <li><input type="checkbox" id="checkbox46" checked="checked"><label for="checkbox46">扫码绑定流程</label></li> <li><input type="checkbox" id="checkbox47" checked="checked"><label for="checkbox47">集成调试工具vconsole</label></li> <li><input type="checkbox" id="checkbox48" checked="checked"><label for="checkbox48">集成图片预览插件</label></li> <li><input type="checkbox" id="checkbox49" checked="checked"><label for="checkbox49">使用rem</label></li> <li><input type="checkbox" id="checkbox50" checked="checked"><label for="checkbox50">引入fastClick</label></li> <li><input type="checkbox" id="checkbox51" checked="checked"><label for="checkbox51">头像裁剪上传</label></li> <li><input type="checkbox" id="checkbox52"><label for="checkbox52">骨架屏</label></li> <li><input type="checkbox" id="checkbox53"><label for="checkbox53">图片懒加载</label></li> <li><input type="checkbox" id="checkbox54"><label for="checkbox54">天气图标</label></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="http://gitlab.hekr.me/front-end/fed-docs/edit/master/消防APP模板使用说明/README.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">10/23/2018, 7:23:11 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a4943324.js" defer></script><script src="/assets/js/2.03965f8c.js" defer></script><script src="/assets/js/5.80de3d18.js" defer></script>
  </body>
</html>
