<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>杭州办公网公网端口映射 | Fed-docs</title>
    <meta name="description" content="Hekr前端文档">
    
    
    <link rel="preload" href="/assets/css/0.styles.16e2754c.css" as="style"><link rel="preload" href="/assets/js/app.a4943324.js" as="script"><link rel="preload" href="/assets/js/2.03965f8c.js" as="script"><link rel="preload" href="/assets/js/15.4f0d59db.js" as="script"><link rel="prefetch" href="/assets/js/10.b8994720.js"><link rel="prefetch" href="/assets/js/11.0ec545d6.js"><link rel="prefetch" href="/assets/js/12.02c16ef5.js"><link rel="prefetch" href="/assets/js/13.6ac43ad1.js"><link rel="prefetch" href="/assets/js/14.d408c93e.js"><link rel="prefetch" href="/assets/js/16.82f80a83.js"><link rel="prefetch" href="/assets/js/17.f507f9c3.js"><link rel="prefetch" href="/assets/js/18.22dfb34c.js"><link rel="prefetch" href="/assets/js/19.2a3a415d.js"><link rel="prefetch" href="/assets/js/20.aa1492a8.js"><link rel="prefetch" href="/assets/js/21.c70552a9.js"><link rel="prefetch" href="/assets/js/22.f6b81080.js"><link rel="prefetch" href="/assets/js/23.a75caa1c.js"><link rel="prefetch" href="/assets/js/24.43c1f6cd.js"><link rel="prefetch" href="/assets/js/25.9b841371.js"><link rel="prefetch" href="/assets/js/26.468e842a.js"><link rel="prefetch" href="/assets/js/27.6c7a709f.js"><link rel="prefetch" href="/assets/js/28.a52990ba.js"><link rel="prefetch" href="/assets/js/29.f54cd8f7.js"><link rel="prefetch" href="/assets/js/3.253f865d.js"><link rel="prefetch" href="/assets/js/4.4e7ec42f.js"><link rel="prefetch" href="/assets/js/5.80de3d18.js"><link rel="prefetch" href="/assets/js/6.e4efd90d.js"><link rel="prefetch" href="/assets/js/7.a425c80c.js"><link rel="prefetch" href="/assets/js/8.70b491c7.js"><link rel="prefetch" href="/assets/js/9.70ba6f78.js">
    <link rel="stylesheet" href="/assets/css/0.styles.16e2754c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Fed-docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://10.10.1.2:7777/hekr-components/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hekr-components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://10.10.1.2:7777/auto/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auto
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/sdk/" class="nav-link">SDK</a></div><div class="nav-item"><a href="http://10.10.1.2:7777/layer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="http://gitlab.hekr.me/front-end/fed-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitLab
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://10.10.1.2:7777/hekr-components/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hekr-components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://10.10.1.2:7777/auto/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auto
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/sdk/" class="nav-link">SDK</a></div><div class="nav-item"><a href="http://10.10.1.2:7777/layer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="http://gitlab.hekr.me/front-end/fed-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitLab
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>杭州办公网公网端口映射</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/%E6%9D%AD%E5%B7%9E%E5%8A%9E%E5%85%AC%E7%BD%91%E5%85%AC%E7%BD%91%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.html#一、端口映射表" class="sidebar-link">一、端口映射表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E6%9D%AD%E5%B7%9E%E5%8A%9E%E5%85%AC%E7%BD%91%E5%85%AC%E7%BD%91%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.html#前端项目映射表" class="sidebar-link">前端项目映射表</a></li><li class="sidebar-sub-header"><a href="/%E6%9D%AD%E5%B7%9E%E5%8A%9E%E5%85%AC%E7%BD%91%E5%85%AC%E7%BD%91%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.html#后端项目映射表" class="sidebar-link">后端项目映射表</a></li><li class="sidebar-sub-header"><a href="/%E6%9D%AD%E5%B7%9E%E5%8A%9E%E5%85%AC%E7%BD%91%E5%85%AC%E7%BD%91%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.html#其它映射表" class="sidebar-link">其它映射表</a></li></ul></li><li><a href="/%E6%9D%AD%E5%B7%9E%E5%8A%9E%E5%85%AC%E7%BD%91%E5%85%AC%E7%BD%91%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.html#二、前端项目如何部署在10-10-1-2" class="sidebar-link">二、前端项目如何部署在10.10.1.2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E6%9D%AD%E5%B7%9E%E5%8A%9E%E5%85%AC%E7%BD%91%E5%85%AC%E7%BD%91%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.html#_2-1-配置nginx" class="sidebar-link">2.1. 配置nginx</a></li><li class="sidebar-sub-header"><a href="/%E6%9D%AD%E5%B7%9E%E5%8A%9E%E5%85%AC%E7%BD%91%E5%85%AC%E7%BD%91%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84.html#_2-2-配置gitlab-ci" class="sidebar-link">2.2. 配置gitlab ci</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="杭州办公网公网端口映射"><a href="#杭州办公网公网端口映射" aria-hidden="true" class="header-anchor">#</a> 杭州办公网公网端口映射</h1> <h2 id="一、端口映射表"><a href="#一、端口映射表" aria-hidden="true" class="header-anchor">#</a> 一、端口映射表</h2> <p>杭州办公网固件IP为112.17.116.161，可将部分测试项目部署在内部服务器上，通过端口映射对外提供服务，方便通过公网访问。</p> <h3 id="前端项目映射表"><a href="#前端项目映射表" aria-hidden="true" class="header-anchor">#</a> 前端项目映射表</h3> <table><thead><tr><th>公网端口</th> <th>内网地址</th> <th>项目说明</th></tr></thead> <tbody><tr><td>7000</td> <td>10.1.1.6:3100</td> <td>hekr-components</td></tr> <tr><td>7001</td> <td>10.10.1.2:7001</td> <td>恒大酒店</td></tr> <tr><td>7002</td> <td>10.10.1.2:7002</td> <td>海顿新风</td></tr> <tr><td>7003</td> <td>10.10.1.2:7003</td> <td>东陈default-托马仕新风-无租赁共享版</td></tr> <tr><td>7004</td> <td>10.10.1.2:7004</td> <td>美埃静态</td></tr> <tr><td>7005</td> <td>10.10.1.2:7005</td> <td></td></tr> <tr><td>7006</td> <td>10.10.1.2:7006</td> <td></td></tr> <tr><td>7007</td> <td>10.10.1.2:7007</td> <td>东陈dx-托马仕新风-租赁共享版</td></tr> <tr><td>7008</td> <td>10.10.1.2:7008</td> <td>美埃动态</td></tr> <tr><td>7009</td> <td>10.10.1.2:7009</td> <td>江苏消防dx</td></tr> <tr><td>7010</td> <td>10.10.1.2:7010</td> <td>安德盛威美容仪</td></tr> <tr><td>7011</td> <td>10.10.1.2:7011</td> <td>数源充电桩</td></tr> <tr><td>7012</td> <td>10.10.1.2:7012</td> <td></td></tr> <tr><td>7013</td> <td>10.10.1.2:7013</td> <td></td></tr> <tr><td>7014</td> <td>10.10.1.2:7014</td> <td>托马斯</td></tr> <tr><td>7015</td> <td>10.10.1.2:7015</td> <td>焕颜</td></tr> <tr><td>7016</td> <td>10.10.1.2:7016</td> <td></td></tr> <tr><td>7017</td> <td>10.10.1.2:7017</td> <td></td></tr> <tr><td>7018</td> <td>10.10.1.2:7018</td> <td></td></tr> <tr><td>7019</td> <td>10.10.1.2:7019</td> <td>海水湾</td></tr> <tr><td>7020</td> <td>10.10.1.2:7020</td> <td>新版共享租赁</td></tr> <tr><td>7021</td> <td>10.10.1.2:7021</td> <td>金控</td></tr> <tr><td>7022</td> <td>10.10.1.2:7022</td> <td>同欣</td></tr> <tr><td>7023</td> <td>10.10.1.2:7023</td> <td></td></tr> <tr><td>7024</td> <td>10.10.1.2:7024</td> <td>中科城安</td></tr> <tr><td>7025</td> <td>10.10.1.2:7025</td> <td></td></tr> <tr><td>7026</td> <td>10.10.1.2:7026</td> <td>飞繁web</td></tr> <tr><td>7027</td> <td>10.10.1.2:7027</td> <td></td></tr> <tr><td>7028</td> <td>10.10.1.2:7028</td> <td></td></tr> <tr><td>7029</td> <td>10.10.1.2:7029</td> <td>紫光新锐</td></tr> <tr><td>7030</td> <td>10.10.1.2:7030</td> <td>雷弗web</td></tr> <tr><td>7031</td> <td>10.10.1.2:7031</td> <td>曼瑞德</td></tr> <tr><td>7032</td> <td>10.10.1.2:7032</td> <td>禹成</td></tr> <tr><td>7033</td> <td>10.10.1.2:7033</td> <td>雷弗引导页</td></tr> <tr><td>7034</td> <td>10.10.1.2:7034</td> <td>飞繁wechat</td></tr> <tr><td>7035</td> <td>10.10.1.2:7035</td> <td>行业demo</td></tr> <tr><td>7036</td> <td>10.10.1.2:7036</td> <td>中消恒安</td></tr> <tr><td>7037</td> <td>10.10.1.2:7037</td> <td>中科纳清</td></tr> <tr><td>7038</td> <td>10.10.1.2:7038</td> <td></td></tr> <tr><td>7039</td> <td>10.10.1.2:7039</td> <td></td></tr> <tr><td>7040</td> <td>10.10.1.2:7040</td> <td></td></tr> <tr><td>7041</td> <td>10.10.1.2:7041</td> <td></td></tr> <tr><td>7042</td> <td>10.10.1.2:7042</td> <td></td></tr> <tr><td>7043</td> <td>10.10.1.2:7043</td> <td></td></tr> <tr><td>7044</td> <td>10.10.1.2:7044</td> <td></td></tr> <tr><td>7045</td> <td>10.10.1.2:7045</td> <td></td></tr> <tr><td>7046</td> <td>10.10.1.2:7046</td> <td></td></tr> <tr><td>7047</td> <td>10.10.1.2:7047</td> <td></td></tr> <tr><td>7048</td> <td>10.10.1.2:7048</td> <td></td></tr> <tr><td>7049</td> <td>10.10.1.2:7049</td> <td></td></tr> <tr><td>7050</td> <td>10.10.1.2:7050</td> <td></td></tr> <tr><td>7051</td> <td>10.10.1.2:7051</td> <td></td></tr> <tr><td>7052</td> <td>10.10.1.2:7052</td> <td></td></tr> <tr><td>7053</td> <td>10.10.1.2:7053</td> <td></td></tr> <tr><td>7054</td> <td>10.10.1.2:7054</td> <td></td></tr> <tr><td>7055</td> <td>10.10.1.2:7055</td> <td></td></tr> <tr><td>7056</td> <td>10.10.1.2:7056</td> <td></td></tr> <tr><td>7057</td> <td>10.10.1.2:7057</td> <td></td></tr> <tr><td>7058</td> <td>10.10.1.2:7058</td> <td></td></tr> <tr><td>7059</td> <td>10.10.1.2:7059</td> <td></td></tr> <tr><td>7060</td> <td>10.10.1.2:7060</td> <td></td></tr></tbody></table> <h3 id="后端项目映射表"><a href="#后端项目映射表" aria-hidden="true" class="header-anchor">#</a> 后端项目映射表</h3> <table><thead><tr><th>公网端口</th> <th>内网地址</th> <th>项目说明</th></tr></thead> <tbody><tr><td>10888</td> <td>10.10.1.2:3000</td> <td>console web front</td></tr> <tr><td>10882</td> <td>10.10.1.2:18082 -&gt; 10.10.1.4:8082</td> <td>webapi，&quot;-&gt;&quot;表示通过nginx做了跨域转发，下同</td></tr> <tr><td>10880</td> <td>10.10.1.2:18080 -&gt; 10.10.1.4:8080</td> <td>console</td></tr> <tr><td>10800</td> <td>10.10.1.2:18000 -&gt; 10.10.1.5:8000</td> <td>uaa</td></tr> <tr><td>10895</td> <td>10.10.1.2:18095 -&gt; 10.10.1.5:8095</td> <td>fire</td></tr> <tr><td>10892</td> <td>10.10.1.2:8092</td> <td>nbiot</td></tr> <tr><td>10801</td> <td>10.10.1.2:9002</td> <td>飞繁</td></tr> <tr><td>10802</td> <td>10.10.1.2:9004</td> <td>雷弗</td></tr> <tr><td>10083</td> <td>10.10.1.4:83</td> <td>connect device tcp</td></tr> <tr><td>10084</td> <td>10.10.1.4:84</td> <td>connect device web</td></tr> <tr><td>10085</td> <td>10.10.1.4:85</td> <td>connect app tcp</td></tr> <tr><td>10086</td> <td>10.10.1.4:86</td> <td>connect app websocket</td></tr> <tr><td>10087</td> <td>10.10.1.4:87</td> <td>connect 48 tcp</td></tr> <tr><td>10088</td> <td>10.10.1.4:88</td> <td>connect 48 websocket</td></tr> <tr><td>10093</td> <td>10.10.1.4:93</td> <td>connect 48v2 tcp</td></tr> <tr><td>10094</td> <td>10.10.1.4:94</td> <td>connect 48v2 websocket</td></tr> <tr><td>10193</td> <td>10.10.1.4:193</td> <td>connect 48v2 ssl tcp</td></tr> <tr><td>10194</td> <td>10.10.1.4:194</td> <td>connect 48v2 ssl websocket</td></tr></tbody></table> <h3 id="其它映射表"><a href="#其它映射表" aria-hidden="true" class="header-anchor">#</a> 其它映射表</h3> <p><em><strong>迪文充电桩平台</strong></em>
71xx 预留给充电桩使用，包括前后端，但不包括数源</p> <table><thead><tr><th>公网端口</th> <th>内网地址</th> <th>项目说明</th></tr></thead> <tbody><tr><td>7100</td> <td>10.10.1.2:7100</td> <td>web console</td></tr> <tr><td>7101</td> <td>10.10.1.3:7101 -&gt; 10.10.1.3:3501</td> <td>uaa #跨域转发</td></tr> <tr><td>7102</td> <td>10.10.1.3:7102 -&gt; 10.10.1.3:3502</td> <td>webapi</td></tr></tbody></table> <h2 id="二、前端项目如何部署在10-10-1-2"><a href="#二、前端项目如何部署在10-10-1-2" aria-hidden="true" class="header-anchor">#</a> 二、前端项目如何部署在10.10.1.2</h2> <p>目前后端有三套环境，生产环境，预发环境，杭州开发环境。如果需要调用后端的开发环境，可以考虑将前端也部署在杭州开发环境。其它情况，如调用生产环境或者预发环境，或者静态演示系统，尽量部署在oss上，即以http://hy.hekr.me/xxx形式进行访问。</p> <p>下文以部署海水湾web为例进行部署说明</p> <h3 id="_2-1-配置nginx"><a href="#_2-1-配置nginx" aria-hidden="true" class="header-anchor">#</a> 2.1. 配置nginx</h3> <div class="language- extra-class"><pre class="language-text"><code>#登录10.10.1.2，用户名和密码找管理员分配
ssh zeyang.li@10.10.1.2

#新建web根目录
#注意，统一放在/data/www下，文件名规范xxx-web格式
sudo -u gitlab-runner mkdir /data/www/haisw-web

#进入nginx配置目录
cd /usr/local/openresty/nginx/conf/conf.d

#ls查看目录端口增长到哪了，行业web项目端口号限定在70xx内，
#例如目前最大的为7038.custom.hekrxiaofang-web.conf，可考虑使用7039端口
ls
sudo cp 7001.custom.hengda-web.conf 7039.custom.haisw-web.conf

#修改7039.custom.haisw-web.conf中的listen、root为相应的端口号和web根目录
sudo vim 7039.custom.haisw-web.conf

#重启nginx
sudo /usr/local/openresty/nginx/sbin/nginx -s reload
</code></pre></div><h3 id="_2-2-配置gitlab-ci"><a href="#_2-2-配置gitlab-ci" aria-hidden="true" class="header-anchor">#</a> 2.2. 配置gitlab ci</h3> <p>源码保存在gitlab上，不直接复制至10.10.1.2上，防止服务器故障源码丢失。</p> <ol><li><p>打开runner
进入gitlab的项目主页， <em><strong>settings</strong></em> -&gt; <em><strong>CI/CD</strong></em> ，打开Runners settings，找到 <em><strong>hz-test</strong></em> ，点击对应的&quot;Enable for this project&quot;。</p></li> <li><p>源代码根目录下，新建&quot;.gitlab-ci.yml&quot;文件，内容如下</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>cache:
  paths:
  - node_modules/

部署到杭州办公测试环境:
  script:
    - npm install --registry=http://npm.hekr.me/
#打包命令和目录根据情况进行调整
    - npm run build:test
    - rm -rf /data/www/haisw-web/*
    - cp -R dist/* /data/www/haisw-web/
  tags:
    - hz-test
  only:
    - master
  when: always  #可根据情况改成always或者manual。always表示提交即自动部署，manual表示提交后需要手动点击进行部署
  environment:
    name: 112.17.116.161
    url: http://112.17.116.161:7039/   #端口号要调整

</code></pre></div><p>保存文件并提交，可在 <em><strong>CI/CD</strong></em> -&gt; <em><strong>Pipelines</strong></em> 查看部署详情情况，若一切无问题，可访问进行验证。内网地址为 <em><strong>http://10.10.1.2:7039</strong></em> ，外网地址为 <em><strong>http://112.17.116.161:7039</strong></em></p></div> <footer class="page-edit"><div class="edit-link"><a href="http://gitlab.hekr.me/front-end/fed-docs/edit/master/杭州办公网公网端口映射.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">10/30/2018, 6:50:08 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a4943324.js" defer></script><script src="/assets/js/2.03965f8c.js" defer></script><script src="/assets/js/15.4f0d59db.js" defer></script>
  </body>
</html>
