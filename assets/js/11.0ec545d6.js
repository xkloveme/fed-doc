(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{226:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"hekr-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-cli","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr-cli")]),t._v(" "),a("blockquote",[a("p",[t._v("为氦氪前端们开发的命令行工具")])]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("要求 "),a("a",{attrs:{href:"https://nodejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),a("OutboundLink")],1),t._v(" 7.6 以上版本，以及 "),a("a",{attrs:{href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更改 npm 源")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry http://npm.hekr.me\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局安装")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --global @hekr/hekr-cli\n")])])]),a("h2",{attrs:{id:"环境切换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境切换","aria-hidden":"true"}},[t._v("#")]),t._v(" 环境切换")]),t._v(" "),a("p",[t._v("所有子命令都支持切换到测试环境，使用示例如下")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" -t\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n$ hekr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" --test\n")])])]),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("p",[t._v("运行使用帮助来查看所有命令。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr --help\n\nUsage: hekr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nFor web developers of Hekr\n\nOptions:\n\n  -h, --help     output usage information\n  -V, --version  output the version number\n\nCommands:\n\n  run"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("r        run hekr\n  init"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("i       generate project\n  key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("k        get console key\n  page"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("p       manage H5 pages\n  user"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("u       manage "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("users")]),t._v("\n  virtual"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("    run virtual device\n  refresh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("re   refresh access token\n  upload"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("up    upload new page\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("   display "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("cmd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h2",{attrs:{id:"功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能","aria-hidden":"true"}},[t._v("#")]),t._v(" 功能")]),t._v(" "),a("h3",{attrs:{id:"hekr-hekr-run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-hekr-run","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr/hekr run")]),t._v(" "),a("p",[t._v("直接运行程序，以交互式的方式在菜单中进行操作。")]),t._v(" "),a("p",[t._v("另外，主菜单中每个选项都有对应的 Git 风格的子命令。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or")]),t._v("\n$ hekr run\n\n? Select next step: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Use arrow keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ──────────────\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Generate project\n  Get console keys\n  Manage H5 pages\n  Get protocol template\n  Manage accounts\n  Run virtual device\n  ──────────────\n  Exit\n")])])]),a("p",[t._v("当项目中已有 "),a("code",[t._v("keys.json")]),t._v("，"),a("code",[t._v("hekr-cli")]),t._v(" 会读取其中的信息，主菜单中可能会有额外选项。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("  Account: ting.shen@hekr.me 测试\n  Product: ting.shen@hekr.me\n\n? Select next step: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Use arrow keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ──────────────\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Generate project\n  Get console keys\n  Manage H5 pages\n  Get protocol template\n  Manage accounts\n  Run virtual device\n  ──────────────\n  Refresh access token\n  Upload new page\n  ──────────────\n  Exit\n")])])]),a("h3",{attrs:{id:"hekr-init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-init","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr init")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Generate project")]),t._v("，从项目模板中生成一个新项目。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr init --help\n\nUsage: hekr-init "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("template-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("project-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nGenerate project\n\nOptions:\n\n  -t, --test     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" testing\n  -h, --help     output usage information\n  -o, --offline  use cached template\n")])])]),a("h4",{attrs:{id:"模板选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模板选择","aria-hidden":"true"}},[t._v("#")]),t._v(" 模板选择")]),t._v(" "),a("p",[t._v("支持的模板有：")]),t._v(" "),a("ol",[a("li",[t._v("官方模板("),a("a",{attrs:{href:"http://gitlab.hekr.me/front-end/hekr-vue-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"http://gitlab.hekr.me/front-end/hekr-react-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("React"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"http://gitlab.hekr.me/front-end/hekr-html-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTML"),a("OutboundLink")],1),t._v(")")]),t._v(" "),a("li",[t._v("氦氪 gitlab 模板")]),t._v(" "),a("li",[t._v("github 模板")]),t._v(" "),a("li",[t._v("本地模板")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接运行，以交互式的方式从选项中挑选模板")]),t._v("\n$ hekr init\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 官方模板")]),t._v("\n$ hekr init vue hello-hekr\n$ hekr init react hello-hekr\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 氦氪 gitlab 模板，可选择分支")]),t._v("\n$ hekr init username/repo"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#branch hello-hekr")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# github 模板, 可选择分支")]),t._v("\n$ hekr init github:username/repo hello-hekr\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地模板")]),t._v("\n$ hekr init ./path/to/local-template my-projec\n")])])]),a("h4",{attrs:{id:"自定义模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义模板","aria-hidden":"true"}},[t._v("#")]),t._v(" 自定义模板")]),t._v(" "),a("p",[t._v("项目模板可自定义，存放在氦氪 gitlab、github 和本地中。")]),t._v(" "),a("ul",[a("li",[t._v("模板引擎"),a("strong",[t._v("必须")]),t._v("使用 "),a("a",{attrs:{href:"http://handlebarsjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Handlebars"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("项目文件"),a("strong",[t._v("必须")]),t._v("放在 "),a("code",[t._v("template")]),t._v(" 文件夹中")])]),t._v(" "),a("p",[t._v("模板也可自定义抉择条件，最终根据不同的条件成生成不同配置的项目。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("抉择条件"),a("strong",[t._v("必须")]),t._v("放在 "),a("code",[t._v("meta.json")]),t._v(" 或 "),a("code",[t._v("meta.js")]),t._v(" 文件中，且有以下属性：")]),t._v(" "),a("ul",[a("li",[t._v("prompts: 用于记录用户的抉择，详见 "),a("a",{attrs:{href:"https://github.com/SBoudrias/Inquirer.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Inquirer.js"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("filters: 用于过滤用户抉择后的文件")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// meta.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prompts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"input"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Project name:"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"confirm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Use ESLint to lint code?"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filters"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".+(eslintrc)"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data.lint"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 项目模板结构参考")]),t._v("\nApp\n├── template\n│   ├── src\n│   │   └── main.js\n│   ├── .gitignore\n│   ├── index.html\n│   ├── package.json\n│   └── webpack.config.js\n├── meta.json\n├── package.json\n└── README.md\n")])])]),a("h4",{attrs:{id:"离线模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#离线模式","aria-hidden":"true"}},[t._v("#")]),t._v(" 离线模式")]),t._v(" "),a("p",[t._v("对于同一模板，首次下载后会缓存在 "),a("code",[t._v("~/.hekr")]),t._v("，之后运行命令时如果有 "),a("code",[t._v("offline")]),t._v(" 参数，会从本地缓存中读取模板，节约下载时间。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr init vue hello-hekr --offline\n")])])]),a("h3",{attrs:{id:"hekr-key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-key","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr key")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Get console keys")]),t._v("，获取一体化项目开发时所需的调试参数。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr key\n\n? Select next step: Choose account\n? Account index: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n      Device\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".  透传测试用例 virtual device\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".  主控测试用例 virtual device\n\n? Select next step: Choose device\n? Device index: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n? Generate keys.json "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" current directory? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("运行后，依次选择 "),a("code",[t._v("用户-设备-(子设备)")]),t._v("，最后可选择是否在当前目录下生成 "),a("code",[t._v("keys.json")]),t._v("， 用于存储设备信息。")]),t._v(" "),a("p",[t._v("生成 "),a("code",[t._v("keys.json")]),t._v(" 后，可与项目中的 "),a("code",[t._v("webpack")]),t._v(" 配合，提高开发效率，详见 "),a("a",{attrs:{href:"http://gitlab.hekr.me/HEKR-Cloud/HEKR-INTERNAL-DOCUMENTS/blob/master/UED/%E5%89%8D%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%BB%BA%E8%AE%AE.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端一体化开发建议"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("p",[t._v("此外，"),a("code",[t._v("hekr-cli")]),t._v(" 运行时会尝试读取项目中 "),a("code",[t._v("keys.json")]),t._v(" 的参数，从而省略程序的某些重复操作。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// keys.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"devTid"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ctrlKey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ppk"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"hekr-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-page","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr page")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Manage H5 pages")]),t._v(", 管理设备产品下的 H5 页面。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr page\n\n? Select next step: Choose account\n? Account index: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n      Product       Category\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".  透传测试用例  家居家装/开发板\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".  主控测试用例  家居家装/开发板\n\n? Select next step: Choose product\n? Product index: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n      Filename  Date\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".  test.zip  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),t._v("-04-25 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(":30:05\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".  test.zip  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),t._v("-04-24 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":06:06\n\n? Select next step: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Use arrow keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ──────────────\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Upload new page\n  Upgrade priority\n  Remove page\n  Download page\n  ──────────────\n  Main menu\n  ──────────────\n  Exit\n")])])]),a("p",[t._v("运行后，依次选择 "),a("code",[t._v("用户-产品-(子产品)")]),t._v("，最后可选择是否在当前目录下生成 "),a("code",[t._v("keys.json")]),t._v("，用于存储产品信息（注意，产品账户和设备账户可能是不同的）。")]),t._v(" "),a("p",[t._v("之后，会显示云端已有的页面和时间信息，之后可对所有页面进行上传、提升优先级、删除、下载的操作，与 "),a("a",{attrs:{href:"https://console.hekr.me/",target:"_blank",rel:"noopener noreferrer"}},[t._v("console"),a("OutboundLink")],1),t._v(" 平台中一致。")]),t._v(" "),a("h4",{attrs:{id:"页面上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面上传","aria-hidden":"true"}},[t._v("#")]),t._v(" 页面上传")]),t._v(" "),a("p",[t._v("选择 "),a("code",[t._v("Upload new page")]),t._v(" 后，会搜索项目根目录和 "),a("code",[t._v("dist")]),t._v(" 下的 "),a("code",[t._v("zip")]),t._v(" 文件。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("? Select next step: Upload new page\n\n      Filename  Path\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".  test.zip  ./\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".  test.zip  ./dist\n\n? Select next step: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Use arrow keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ──────────────\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Choose "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("zip")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v("\n  ──────────────\n  Back\n  Main menu\n  ──────────────\n  Exit\n")])])]),a("h3",{attrs:{id:"hekr-protocol"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-protocol","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr protocol")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Get protocol template")]),t._v("，获取设备产品的协议模板。")]),t._v(" "),a("p",[t._v("操作与 "),a("code",[t._v("hekr page")]),t._v(" 相同，最后可选择是否在当前目录下生成 "),a("code",[t._v("protocol.json")]),t._v("， 用于存储协议模板。")]),t._v(" "),a("p",[t._v("生成的 "),a("code",[t._v("protocol.json")]),t._v(" 用于开发具有局域网功能的一体化项目，SDK 在局域网下利用该文件编解码，而非实时从云端获取。")]),t._v(" "),a("h3",{attrs:{id:"hekr-user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-user","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr user")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Manage accounts")]),t._v("，管理多个不同项目的账户。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr uesr\n\n    Username              Password  Description  PID\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".  ting.shen@hekr.me     ********  测试\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".  hekr.product@hekr.me  ********  公版\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(".  feedback@hekr.me      ********  云知屋\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(".  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18767123590")]),t._v("           ********  云知屋设备   01015362077\n    --------------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(".  example@gmail.com     ********  一体化项目   00000000000\n\n? Select next step: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Use arrow keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  ──────────────\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Change account\n  Add account\n  Delete account\n  Show password\n  ──────────────\n  Main menu\n  ──────────────\n  Exit\n")])])]),a("p",[t._v("运行后，会显示两个部分的账户，分别是：")]),t._v(" "),a("ul",[a("li",[t._v("测试与公用账户: 预设账户，无法删除或更改")]),t._v(" "),a("li",[t._v("自定义账户: 可进行增删改查的操作，适用于各类一体化项目")])]),t._v(" "),a("h3",{attrs:{id:"hekr-refresh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-refresh","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr refresh")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Refresh access token")]),t._v("，刷新 "),a("code",[t._v("keys.json")]),t._v(" 中的 "),a("code",[t._v("accessToken")]),t._v("。")]),t._v(" "),a("p",[t._v("此命令只是一个快捷方式，因此请先确保 "),a("code",[t._v("keys.json")]),t._v(" 中有 "),a("code",[t._v("account")]),t._v("，否则会提示错误。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr refresh\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"account"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v(",\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accessToken"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 错误提示")]),t._v("\nWarning: No account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" keys.json\n")])])]),a("h3",{attrs:{id:"hekr-upload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-upload","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr upload")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Upload new page")]),t._v("，直接上传项目 "),a("code",[t._v("dist")]),t._v(" 目录下的第一个 "),a("code",[t._v("zip")]),t._v(" 文件。")]),t._v(" "),a("p",[t._v("此命令只是一个快捷方式，因此请先确保 "),a("code",[t._v("keys.json")]),t._v(" 中有 "),a("code",[t._v("productAccount")]),t._v("，否则会提示错误。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr upload\n\n      Filename  Date\n\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".  test.zip  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),t._v("-04-25 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(":30:05\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".  test.zip  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2017")]),t._v("-04-24 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(":06:06\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 错误提示")]),t._v("\nWarning: No product "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" keys.json\n")])])]),a("h4",{attrs:{id:"hekr-upload-all"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-upload-all","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr upload --all")]),t._v(" "),a("p",[t._v("在命令中加入 "),a("code",[t._v("--all")]),t._v(" 参数，表示对多个项目进行批量处理。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr upload --help\n\nUsage: hekr-upload\n\nUpload H5 page or map "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n\nOptions:\n\n  -t, --test           "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" testing\n  -h, --help           output usage information\n  -a, --all "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("prefix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("   upload all H5 pages with prefix, default "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cloud-house"')]),t._v("\n  -m, --map "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  run "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" before uploading\n\nExamples:\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# quick start")]),t._v("\n  $ hekr upload\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# upload all projects of Cloud House")]),t._v("\n  $ hekr upload -a cloud-house\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# run command in each project")]),t._v("\n  $ hekr upload -am "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yarn install"')]),t._v("\n")])])]),a("p",[t._v("例如，运行 "),a("code",[t._v("hekr up -a")]),t._v(" 后，会检测 "),a("code",[t._v("hekr-cli")]),t._v(" 当前运行目录下，名称中包含 "),a("code",[t._v("cloud-house")]),t._v(" 的项目，进行批量上传。")]),t._v(" "),a("p",[t._v("或者，运行 "),a("code",[t._v('hekr up -am "yarn upgrade"')]),t._v("，后，会对相应文件夹进行批量的更新依赖包的处理，但"),a("strong",[t._v("不会")]),t._v("进项批量上传。")]),t._v(" "),a("h3",{attrs:{id:"hekr-virtual"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hekr-virtual","aria-hidden":"true"}},[t._v("#")]),t._v(" hekr virtual")]),t._v(" "),a("p",[t._v("即主菜单中的 "),a("code",[t._v("Run virtual device")]),t._v("，启动一个虚拟设备。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ hekr virtual\n\nUsage: hekr-virtual\n\nRun virtual device\n\nOptions:\n\n  -t, --test          "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" testing\n  -d, --debug         Virtual device "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("debug option is "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  -h, --help          output usage information\n")])])]),a("p",[t._v("具有以下功能:")]),t._v(" "),a("ol",[a("li",[t._v("支持接收到下发帧时，根据协议自动返回对应的上报帧")]),t._v(" "),a("li",[t._v("支持预约任务，包括自动接收、主动触发等")]),t._v(" "),a("li",[t._v("支持 "),a("code",[t._v("JSON透传协议不校验raw")]),t._v(" 协议的设备")]),t._v(" "),a("li",[t._v("支持网关及子设备，但目前多人开发同一网关下的不同子设备时，存在冲突，待解决")]),t._v(" "),a("li",[t._v("当虚拟设备为"),a("code",[t._v("test")]),t._v("结尾的设备是，要加上参数"),a("code",[t._v("--debug")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接运行")]),t._v("\n$ hekr virtual\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模拟真实设备，所有上报帧会延迟相应时间后发送")]),t._v("\n$ hekr virtual -d "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行名称包含test的设备")]),t._v("\n$ hekr virtual -b\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);