<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>hekr-cli | Fed-docs</title>
    <meta name="description" content="Hekr前端文档">
    
    
    <link rel="preload" href="/fed-doc/assets/css/0.styles.79df93a7.css" as="style"><link rel="preload" href="/fed-doc/assets/js/app.e912bd36.js" as="script"><link rel="preload" href="/fed-doc/assets/js/2.03965f8c.js" as="script"><link rel="preload" href="/fed-doc/assets/js/11.0ec545d6.js" as="script"><link rel="prefetch" href="/fed-doc/assets/js/10.b8994720.js"><link rel="prefetch" href="/fed-doc/assets/js/12.02c16ef5.js"><link rel="prefetch" href="/fed-doc/assets/js/13.6ac43ad1.js"><link rel="prefetch" href="/fed-doc/assets/js/14.d408c93e.js"><link rel="prefetch" href="/fed-doc/assets/js/15.4f0d59db.js"><link rel="prefetch" href="/fed-doc/assets/js/16.82f80a83.js"><link rel="prefetch" href="/fed-doc/assets/js/17.f507f9c3.js"><link rel="prefetch" href="/fed-doc/assets/js/18.22dfb34c.js"><link rel="prefetch" href="/fed-doc/assets/js/19.2a3a415d.js"><link rel="prefetch" href="/fed-doc/assets/js/20.aa1492a8.js"><link rel="prefetch" href="/fed-doc/assets/js/21.c70552a9.js"><link rel="prefetch" href="/fed-doc/assets/js/22.f6b81080.js"><link rel="prefetch" href="/fed-doc/assets/js/23.a75caa1c.js"><link rel="prefetch" href="/fed-doc/assets/js/24.43c1f6cd.js"><link rel="prefetch" href="/fed-doc/assets/js/25.9b841371.js"><link rel="prefetch" href="/fed-doc/assets/js/26.468e842a.js"><link rel="prefetch" href="/fed-doc/assets/js/27.6c7a709f.js"><link rel="prefetch" href="/fed-doc/assets/js/28.a52990ba.js"><link rel="prefetch" href="/fed-doc/assets/js/29.f54cd8f7.js"><link rel="prefetch" href="/fed-doc/assets/js/3.253f865d.js"><link rel="prefetch" href="/fed-doc/assets/js/4.4e7ec42f.js"><link rel="prefetch" href="/fed-doc/assets/js/5.80de3d18.js"><link rel="prefetch" href="/fed-doc/assets/js/6.e4efd90d.js"><link rel="prefetch" href="/fed-doc/assets/js/7.a425c80c.js"><link rel="prefetch" href="/fed-doc/assets/js/8.70b491c7.js"><link rel="prefetch" href="/fed-doc/assets/js/9.70ba6f78.js">
    <link rel="stylesheet" href="/fed-doc/assets/css/0.styles.79df93a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fed-doc/" class="home-link router-link-active"><!----> <span class="site-name">Fed-docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://10.10.1.2:7777/hekr-components/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hekr-components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://10.10.1.2:7777/auto/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auto
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/fed-doc/sdk/" class="nav-link">SDK</a></div><div class="nav-item"><a href="http://10.10.1.2:7777/layer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="http://gitlab.hekr.me/front-end/fed-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitLab
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://10.10.1.2:7777/hekr-components/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hekr-components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://10.10.1.2:7777/auto/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Auto
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/fed-doc/sdk/" class="nav-link">SDK</a></div><div class="nav-item"><a href="http://10.10.1.2:7777/layer/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  layer
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="http://gitlab.hekr.me/front-end/fed-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitLab
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>hekr-cli</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fed-doc/hekr-cli.html#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fed-doc/hekr-cli.html#环境切换" class="sidebar-link">环境切换</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fed-doc/hekr-cli.html#使用" class="sidebar-link">使用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/fed-doc/hekr-cli.html#功能" class="sidebar-link">功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-hekr-run" class="sidebar-link">hekr/hekr run</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-init" class="sidebar-link">hekr init</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-key" class="sidebar-link">hekr key</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-page" class="sidebar-link">hekr page</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-protocol" class="sidebar-link">hekr protocol</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-user" class="sidebar-link">hekr user</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-refresh" class="sidebar-link">hekr refresh</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-upload" class="sidebar-link">hekr upload</a></li><li class="sidebar-sub-header"><a href="/fed-doc/hekr-cli.html#hekr-virtual" class="sidebar-link">hekr virtual</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hekr-cli"><a href="#hekr-cli" aria-hidden="true" class="header-anchor">#</a> hekr-cli</h1> <blockquote><p>为氦氪前端们开发的命令行工具</p></blockquote> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <p>要求 <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 7.6 以上版本，以及 <a href="https://git-scm.com/" target="_blank" rel="noopener noreferrer">Git<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 更改 npm 源</span>
$ <span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry http://npm.hekr.me

<span class="token comment"># 全局安装</span>
$ <span class="token function">npm</span> <span class="token function">install</span> --global @hekr/hekr-cli
</code></pre></div><h2 id="环境切换"><a href="#环境切换" aria-hidden="true" class="header-anchor">#</a> 环境切换</h2> <p>所有子命令都支持切换到测试环境，使用示例如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span> -t
<span class="token comment"># 或者</span>
$ hekr <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span> --test
</code></pre></div><h2 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h2> <p>运行使用帮助来查看所有命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr --help

Usage: hekr <span class="token punctuation">[</span>command<span class="token punctuation">]</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span>

For web developers of Hekr

Options:

  -h, --help     output usage information
  -V, --version  output the version number

Commands:

  run<span class="token operator">|</span>r        run hekr
  init<span class="token operator">|</span>i       generate project
  key<span class="token operator">|</span>k        get console key
  page<span class="token operator">|</span>p       manage H5 pages
  user<span class="token operator">|</span>u       manage <span class="token function">users</span>
  virtual<span class="token operator">|</span><span class="token function">v</span>    run virtual device
  refresh<span class="token operator">|</span>re   refresh access token
  upload<span class="token operator">|</span>up    upload new page
  <span class="token builtin class-name">help</span> <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span>   display <span class="token builtin class-name">help</span> <span class="token keyword">for</span> <span class="token punctuation">[</span>cmd<span class="token punctuation">]</span>
</code></pre></div><h2 id="功能"><a href="#功能" aria-hidden="true" class="header-anchor">#</a> 功能</h2> <h3 id="hekr-hekr-run"><a href="#hekr-hekr-run" aria-hidden="true" class="header-anchor">#</a> hekr/hekr run</h3> <p>直接运行程序，以交互式的方式在菜单中进行操作。</p> <p>另外，主菜单中每个选项都有对应的 Git 风格的子命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr
<span class="token comment"># or</span>
$ hekr run

? Select next step: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
  ──────────────
<span class="token operator">&gt;</span> Generate project
  Get console keys
  Manage H5 pages
  Get protocol template
  Manage accounts
  Run virtual device
  ──────────────
  Exit
</code></pre></div><p>当项目中已有 <code>keys.json</code>，<code>hekr-cli</code> 会读取其中的信息，主菜单中可能会有额外选项。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>  Account: ting.shen@hekr.me 测试
  Product: ting.shen@hekr.me

? Select next step: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
  ──────────────
<span class="token operator">&gt;</span> Generate project
  Get console keys
  Manage H5 pages
  Get protocol template
  Manage accounts
  Run virtual device
  ──────────────
  Refresh access token
  Upload new page
  ──────────────
  Exit
</code></pre></div><h3 id="hekr-init"><a href="#hekr-init" aria-hidden="true" class="header-anchor">#</a> hekr init</h3> <p>即主菜单中的 <code>Generate project</code>，从项目模板中生成一个新项目。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr init --help

Usage: hekr-init <span class="token punctuation">[</span>template-name<span class="token punctuation">]</span> <span class="token punctuation">[</span>project-name<span class="token punctuation">]</span>

Generate project

Options:

  -t, --test     <span class="token builtin class-name">set</span> <span class="token function">env</span> <span class="token keyword">for</span> testing
  -h, --help     output usage information
  -o, --offline  use cached template
</code></pre></div><h4 id="模板选择"><a href="#模板选择" aria-hidden="true" class="header-anchor">#</a> 模板选择</h4> <p>支持的模板有：</p> <ol><li>官方模板(<a href="http://gitlab.hekr.me/front-end/hekr-vue-template" target="_blank" rel="noopener noreferrer">Vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="http://gitlab.hekr.me/front-end/hekr-react-template" target="_blank" rel="noopener noreferrer">React<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="http://gitlab.hekr.me/front-end/hekr-html-template" target="_blank" rel="noopener noreferrer">HTML<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>氦氪 gitlab 模板</li> <li>github 模板</li> <li>本地模板</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 直接运行，以交互式的方式从选项中挑选模板</span>
$ hekr init

<span class="token comment"># 官方模板</span>
$ hekr init vue hello-hekr
$ hekr init react hello-hekr

<span class="token comment"># 氦氪 gitlab 模板，可选择分支</span>
$ hekr init username/repo<span class="token comment">#branch hello-hekr</span>

<span class="token comment"># github 模板, 可选择分支</span>
$ hekr init github:username/repo hello-hekr

<span class="token comment"># 本地模板</span>
$ hekr init ./path/to/local-template my-projec
</code></pre></div><h4 id="自定义模板"><a href="#自定义模板" aria-hidden="true" class="header-anchor">#</a> 自定义模板</h4> <p>项目模板可自定义，存放在氦氪 gitlab、github 和本地中。</p> <ul><li>模板引擎<strong>必须</strong>使用 <a href="http://handlebarsjs.com/" target="_blank" rel="noopener noreferrer">Handlebars<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>项目文件<strong>必须</strong>放在 <code>template</code> 文件夹中</li></ul> <p>模板也可自定义抉择条件，最终根据不同的条件成生成不同配置的项目。</p> <ul><li><p>抉择条件<strong>必须</strong>放在 <code>meta.json</code> 或 <code>meta.js</code> 文件中，且有以下属性：</p> <ul><li>prompts: 用于记录用户的抉择，详见 <a href="https://github.com/SBoudrias/Inquirer.js" target="_blank" rel="noopener noreferrer">Inquirer.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>filters: 用于过滤用户抉择后的文件</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// meta.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;prompts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Project name:&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token string">&quot;lint&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;confirm&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Use ESLint to lint code?&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token string">&quot;filters&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;.+(eslintrc)&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;data.lint&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 项目模板结构参考</span>
App
├── template
│   ├── src
│   │   └── main.js
│   ├── .gitignore
│   ├── index.html
│   ├── package.json
│   └── webpack.config.js
├── meta.json
├── package.json
└── README.md
</code></pre></div><h4 id="离线模式"><a href="#离线模式" aria-hidden="true" class="header-anchor">#</a> 离线模式</h4> <p>对于同一模板，首次下载后会缓存在 <code>~/.hekr</code>，之后运行命令时如果有 <code>offline</code> 参数，会从本地缓存中读取模板，节约下载时间。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr init vue hello-hekr --offline
</code></pre></div><h3 id="hekr-key"><a href="#hekr-key" aria-hidden="true" class="header-anchor">#</a> hekr key</h3> <p>即主菜单中的 <code>Get console keys</code>，获取一体化项目开发时所需的调试参数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr key

? Select next step: Choose account
? Account index: <span class="token number">1</span>

      Device

  <span class="token number">1</span>.  透传测试用例 virtual device
  <span class="token number">2</span>.  主控测试用例 virtual device

? Select next step: Choose device
? Device index: <span class="token number">1</span>

<span class="token punctuation">{</span>
  <span class="token string">&quot;account&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;...&quot;</span>,
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;...&quot;</span>,
  <span class="token string">&quot;accessToken&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;...&quot;</span>
<span class="token punctuation">}</span>

? Generate keys.json <span class="token keyword">in</span> current directory? <span class="token punctuation">(</span>y/N<span class="token punctuation">)</span>
</code></pre></div><p>运行后，依次选择 <code>用户-设备-(子设备)</code>，最后可选择是否在当前目录下生成 <code>keys.json</code>， 用于存储设备信息。</p> <p>生成 <code>keys.json</code> 后，可与项目中的 <code>webpack</code> 配合，提高开发效率，详见 <a href="http://gitlab.hekr.me/HEKR-Cloud/HEKR-INTERNAL-DOCUMENTS/blob/master/UED/%E5%89%8D%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E5%BB%BA%E8%AE%AE.md" target="_blank" rel="noopener noreferrer">前端一体化开发建议<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>此外，<code>hekr-cli</code> 运行时会尝试读取项目中 <code>keys.json</code> 的参数，从而省略程序的某些重复操作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// keys.json</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;account&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;password&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;description&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;query&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;devTid&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ctrlKey&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;ppk&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;accessToken&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;...&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="hekr-page"><a href="#hekr-page" aria-hidden="true" class="header-anchor">#</a> hekr page</h3> <p>即主菜单中的 <code>Manage H5 pages</code>, 管理设备产品下的 H5 页面。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr page

? Select next step: Choose account
? Account index: <span class="token number">1</span>

      Product       Category

  <span class="token number">1</span>.  透传测试用例  家居家装/开发板
  <span class="token number">2</span>.  主控测试用例  家居家装/开发板

? Select next step: Choose product
? Product index: <span class="token number">1</span>

      Filename  Date

  <span class="token number">1</span>.  test.zip  <span class="token number">2017</span>-04-25 <span class="token number">11</span>:30:05
  <span class="token number">2</span>.  test.zip  <span class="token number">2017</span>-04-24 <span class="token number">14</span>:06:06

? Select next step: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
  ──────────────
<span class="token operator">&gt;</span> Upload new page
  Upgrade priority
  Remove page
  Download page
  ──────────────
  Main menu
  ──────────────
  Exit
</code></pre></div><p>运行后，依次选择 <code>用户-产品-(子产品)</code>，最后可选择是否在当前目录下生成 <code>keys.json</code>，用于存储产品信息（注意，产品账户和设备账户可能是不同的）。</p> <p>之后，会显示云端已有的页面和时间信息，之后可对所有页面进行上传、提升优先级、删除、下载的操作，与 <a href="https://console.hekr.me/" target="_blank" rel="noopener noreferrer">console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 平台中一致。</p> <h4 id="页面上传"><a href="#页面上传" aria-hidden="true" class="header-anchor">#</a> 页面上传</h4> <p>选择 <code>Upload new page</code> 后，会搜索项目根目录和 <code>dist</code> 下的 <code>zip</code> 文件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>? Select next step: Upload new page

      Filename  Path

  <span class="token number">1</span>.  test.zip  ./
  <span class="token number">2</span>.  test.zip  ./dist

? Select next step: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
  ──────────────
<span class="token operator">&gt;</span> Choose <span class="token function">zip</span> <span class="token function">file</span>
  ──────────────
  Back
  Main menu
  ──────────────
  Exit
</code></pre></div><h3 id="hekr-protocol"><a href="#hekr-protocol" aria-hidden="true" class="header-anchor">#</a> hekr protocol</h3> <p>即主菜单中的 <code>Get protocol template</code>，获取设备产品的协议模板。</p> <p>操作与 <code>hekr page</code> 相同，最后可选择是否在当前目录下生成 <code>protocol.json</code>， 用于存储协议模板。</p> <p>生成的 <code>protocol.json</code> 用于开发具有局域网功能的一体化项目，SDK 在局域网下利用该文件编解码，而非实时从云端获取。</p> <h3 id="hekr-user"><a href="#hekr-user" aria-hidden="true" class="header-anchor">#</a> hekr user</h3> <p>即主菜单中的 <code>Manage accounts</code>，管理多个不同项目的账户。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr uesr

    Username              Password  Description  PID

<span class="token number">1</span>.  ting.shen@hekr.me     ********  测试
<span class="token number">2</span>.  hekr.product@hekr.me  ********  公版
<span class="token number">3</span>.  feedback@hekr.me      ********  云知屋
<span class="token number">4</span>.  <span class="token number">18767123590</span>           ********  云知屋设备   01015362077
    --------------
<span class="token number">5</span>.  example@gmail.com     ********  一体化项目   00000000000

? Select next step: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
  ──────────────
<span class="token operator">&gt;</span> Change account
  Add account
  Delete account
  Show password
  ──────────────
  Main menu
  ──────────────
  Exit
</code></pre></div><p>运行后，会显示两个部分的账户，分别是：</p> <ul><li>测试与公用账户: 预设账户，无法删除或更改</li> <li>自定义账户: 可进行增删改查的操作，适用于各类一体化项目</li></ul> <h3 id="hekr-refresh"><a href="#hekr-refresh" aria-hidden="true" class="header-anchor">#</a> hekr refresh</h3> <p>即主菜单中的 <code>Refresh access token</code>，刷新 <code>keys.json</code> 中的 <code>accessToken</code>。</p> <p>此命令只是一个快捷方式，因此请先确保 <code>keys.json</code> 中有 <code>account</code>，否则会提示错误。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr refresh

<span class="token punctuation">{</span>
  <span class="token string">&quot;account&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;...&quot;</span>,
  <span class="token string">&quot;query&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;...&quot;</span>,
  <span class="token string">&quot;accessToken&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;...&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 错误提示</span>
Warning: No account <span class="token keyword">in</span> keys.json
</code></pre></div><h3 id="hekr-upload"><a href="#hekr-upload" aria-hidden="true" class="header-anchor">#</a> hekr upload</h3> <p>即主菜单中的 <code>Upload new page</code>，直接上传项目 <code>dist</code> 目录下的第一个 <code>zip</code> 文件。</p> <p>此命令只是一个快捷方式，因此请先确保 <code>keys.json</code> 中有 <code>productAccount</code>，否则会提示错误。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr upload

      Filename  Date

  <span class="token number">1</span>.  test.zip  <span class="token number">2017</span>-04-25 <span class="token number">11</span>:30:05
  <span class="token number">2</span>.  test.zip  <span class="token number">2017</span>-04-24 <span class="token number">14</span>:06:06

<span class="token comment"># 错误提示</span>
Warning: No product <span class="token keyword">in</span> keys.json
</code></pre></div><h4 id="hekr-upload-all"><a href="#hekr-upload-all" aria-hidden="true" class="header-anchor">#</a> hekr upload --all</h4> <p>在命令中加入 <code>--all</code> 参数，表示对多个项目进行批量处理。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr upload --help

Usage: hekr-upload

Upload H5 page or map <span class="token builtin class-name">command</span>

Options:

  -t, --test           <span class="token builtin class-name">set</span> <span class="token function">env</span> <span class="token keyword">for</span> testing
  -h, --help           output usage information
  -a, --all <span class="token punctuation">[</span>prefix<span class="token punctuation">]</span>   upload all H5 pages with prefix, default <span class="token string">&quot;cloud-house&quot;</span>
  -m, --map <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>  run <span class="token builtin class-name">command</span> before uploading

Examples:

  <span class="token comment"># quick start</span>
  $ hekr upload

  <span class="token comment"># upload all projects of Cloud House</span>
  $ hekr upload -a cloud-house

  <span class="token comment"># run command in each project</span>
  $ hekr upload -am <span class="token string">&quot;yarn install&quot;</span>
</code></pre></div><p>例如，运行 <code>hekr up -a</code> 后，会检测 <code>hekr-cli</code> 当前运行目录下，名称中包含 <code>cloud-house</code> 的项目，进行批量上传。</p> <p>或者，运行 <code>hekr up -am &quot;yarn upgrade&quot;</code>，后，会对相应文件夹进行批量的更新依赖包的处理，但<strong>不会</strong>进项批量上传。</p> <h3 id="hekr-virtual"><a href="#hekr-virtual" aria-hidden="true" class="header-anchor">#</a> hekr virtual</h3> <p>即主菜单中的 <code>Run virtual device</code>，启动一个虚拟设备。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ hekr virtual

Usage: hekr-virtual

Run virtual device

Options:

  -t, --test          <span class="token builtin class-name">set</span> <span class="token function">env</span> <span class="token keyword">for</span> testing
  -d, --debug         Virtual device <span class="token keyword">for</span> test<span class="token punctuation">(</span>debug option is <span class="token boolean">true</span><span class="token punctuation">)</span>
  -h, --help          output usage information
</code></pre></div><p>具有以下功能:</p> <ol><li>支持接收到下发帧时，根据协议自动返回对应的上报帧</li> <li>支持预约任务，包括自动接收、主动触发等</li> <li>支持 <code>JSON透传协议不校验raw</code> 协议的设备</li> <li>支持网关及子设备，但目前多人开发同一网关下的不同子设备时，存在冲突，待解决</li> <li>当虚拟设备为<code>test</code>结尾的设备是，要加上参数<code>--debug</code></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 直接运行</span>
$ hekr virtual

<span class="token comment"># 模拟真实设备，所有上报帧会延迟相应时间后发送</span>
$ hekr virtual -d <span class="token number">1000</span>

<span class="token comment"># 运行名称包含test的设备</span>
$ hekr virtual -b
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="http://gitlab.hekr.me/front-end/fed-docs/edit/master/hekr-cli.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">9/12/2018, 2:03:07 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/fed-doc/assets/js/app.e912bd36.js" defer></script><script src="/fed-doc/assets/js/2.03965f8c.js" defer></script><script src="/fed-doc/assets/js/11.0ec545d6.js" defer></script>
  </body>
</html>
